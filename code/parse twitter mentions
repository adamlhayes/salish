import os.path
import csv

#users = ["NOAAFish_NWFSC", "NOAAFish_WCRO", "@NOAAFisheries", "@NOAAHabitats"]

#screen_name = "NOAAFish_NWFSC"

subdirectory = "tweets"

#with open('twitter nodes with tweets.txt', 'r') as f:
#    seeds = f.readlines()
    

#users = []
#for oldname in seeds:
#    newname = oldname.strip('\n')
#    users.append(newname)
    
with open('twitter nodes.txt', 'r') as f:
    seeds = f.readlines()
    

users = []
for oldname in seeds:
    newname = oldname.strip('\n')
    users.append(newname)

output_file = open("mentions.csv", "w", encoding="utf-8")
#count_file = open("mentions_count.csv", "w", encoding="utf-8")

rowcount = 0
colcount = 0
count = [[0 for i in range(200)] for j in range(200)]
print(count)
for username in users:
    rowcount = 0
    colcount = colcount + 1
    print(rowcount)
    for screen_name in users:
        rowcount = rowcount + 1
#        if screen_name == "NisquallyTribe" or "StillwatersEnv":
#            continue
        with open(os.path.join(subdirectory, '{}s_tweets.csv'.format(screen_name)), 'rt') as f: 
            reader = csv.reader(f, delimiter=',')
#            print(username)
            for row in reader:
                if row == []:
                    continue
#                print(row[2])   
                if username in row[2]: # if the username shall be on column 3 (-> index 2)
                    print(screen_name + " mentions " + username + " on " + row[1])
                    print(screen_name + " mentions " + username + " on " + row[1], file = output_file)
                    count[rowcount][colcount] = count[rowcount][colcount] + 1


                    
                    
with open("mentions_count.csv", "w") as f:
    writer = csv.writer(f)
    writer.writerows(count)       
